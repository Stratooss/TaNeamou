<!doctype html>
<html lang="el">
  <head>
    <meta charset="utf-8" />
    <title>Î•ÏÎºÎ¿Î»Î± ÎÎ­Î± â€“ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background-color: #ffffff;
        font-size: 18px;
        line-height: 1.6;
      }

      .site-header {
        background: #1d4ed8;
        color: white;
        padding: 1.2rem 0;
        margin-bottom: 1.2rem;
      }

      .site-title {
        font-size: 1.6rem;
        font-weight: 700;
      }

      .site-subtitle {
        font-size: 0.95rem;
        opacity: 0.98;
      }

      .back-link {
        font-size: 0.95rem;
        margin-bottom: 1rem;
        display: inline-block;
      }

      /* ===== ÎšÎ»Î±ÏƒÎ¹ÎºÎ­Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ Î¬ÏÎ¸ÏÏ‰Î½ (Î»Î¯ÏƒÏ„Î± Î±Ï€ÏŒ news.json) ===== */
      .article-card {
        border-radius: 16px;
        border: 1px solid #e5e7eb;
        padding: 1rem 1.2rem;
        margin-bottom: 1rem;
        box-shadow: 0 2px 6px rgba(15, 23, 42, 0.1);
        background: #ffffff;
      }

      .article-card h2 {
        margin-top: 0;
        font-size: 1.2rem;
      }

      .meta {
        font-size: 0.85rem;
        color: #4b5563;
        margin-bottom: 0.4rem;
      }

      .content {
        white-space: pre-wrap;
        font-size: 1rem;
      }

      /* ===== Grid Î³Î¹Î± ÏƒÎ¿Î²Î±ÏÎ­Ï‚ Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ­Ï‚ (ÏŒÏ€Ï‰Ï‚ ÏƒÏ„Î·Î½ index) ===== */
      .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1.5rem;
        max-width: 960px;
        margin: 0 auto;
      }

      .category-tile {
        border-radius: 18px;
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        box-shadow: 0 2px 6px rgba(37, 99, 235, 0.16);
        overflow: hidden;
        transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease;
      }

      .category-tile:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(15, 23, 42, 0.22);
        background: #dbeafe;
      }

      .category-tile-link {
        display: flex;
        flex-direction: column;
        height: 100%;
        text-decoration: none;
        color: inherit;
      }

      .category-thumbnail-wrapper {
        width: 100%;
        aspect-ratio: 1 / 1;
        background: #dbeafe;
        overflow: hidden;
      }

      .category-thumbnail {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .category-tile-body {
        padding: 1rem 1rem 1.1rem;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        align-items: center;
        text-align: center;
      }

      .category-tile-title {
        font-weight: 700;
        font-size: 1.05rem;
      }

      .category-tile-subtitle {
        font-size: 0.95rem;
        opacity: 0.95;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="container">
        <div class="d-flex flex-column align-items-start gap-1">
          <div class="site-title">ğŸ“° Î•ÏÎºÎ¿Î»Î± ÎÎ­Î±</div>
          <div class="site-subtitle">Î¤Î± Î½Î­Î± ÏƒÎµ Î±Ï€Î»Î¬ ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬</div>
        </div>
      </div>
    </header>

    <main class="container mb-5">
      <a href="index.html" class="back-link">â† Î Î¯ÏƒÏ‰ ÏƒÏ„Î¿ Î¼ÎµÎ½Î¿Ï ÎºÎ±Ï„Î·Î³Î¿ÏÎ¹ÏÎ½</a>
      <h1 id="page-title" class="h4 mb-3">Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚</h1>

      <div id="content"></div>
    </main>

    <script>
      const params = new URLSearchParams(window.location.search);
      const category = params.get("category") || "serious";

      // metadata Î³Î¹Î± Ï„Î¹Ï‚ 3 ÏƒÎ¿Î²Î±ÏÎ­Ï‚ Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ­Ï‚ (serious-digest)
      const SERIOUS_TOPIC_META = {
        politics_economy: {
          label: "Î Î¿Î»Î¹Ï„Î¹ÎºÎ® & ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¯Î±",
          description: "Î¤Î¹ Î³Î¯Î½ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ ÎºÏ…Î²Î­ÏÎ½Î·ÏƒÎ·, ÏƒÏ„Î· Î²Î¿Ï…Î»Î® ÎºÎ±Î¹ ÏƒÏ„Î·Î½ Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¯Î±.",
          image: "images/serious/politics.png",
        },
        social: {
          label: "ÎšÎ¿Î¹Î½Ï‰Î½Î¯Î±",
          description: "Î˜Î­Î¼Î±Ï„Î± Ï€Î¿Ï… Î±Ï†Î¿ÏÎ¿ÏÎ½ Ï„Î·Î½ ÎºÎ±Î¸Î·Î¼ÎµÏÎ¹Î½Î® Î¶Ï‰Î® ÎºÎ±Î¹ Ï„Î¿Ï…Ï‚ Î±Î½Î¸ÏÏÏ€Î¿Ï…Ï‚.",
          image: "images/serious/social.png",
        },
        world: {
          label: "ÎšÏŒÏƒÎ¼Î¿Ï‚",
          description: "Î£Î·Î¼Î±Î½Ï„Î¹ÎºÎ¬ Î³ÎµÎ³Î¿Î½ÏŒÏ„Î± Î±Ï€ÏŒ Î¬Î»Î»ÎµÏ‚ Ï‡ÏÏÎµÏ‚.",
          image: "images/serious/world.png",
        },
      };

      const pageTitleMap = {
        serious: "Î£Î¿Î²Î±ÏÎ­Ï‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        happy: "Î§Î±ÏÎ¿ÏÎ¼ÎµÎ½ÎµÏ‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        sports: "Î‘Î¸Î»Î·Ï„Î¹ÎºÎ¬",
        screen: "Î¤Î·Î»ÎµÏŒÏÎ±ÏƒÎ· ÎºÎ±Î¹ ÏƒÎ¹Î½ÎµÎ¼Î¬",
        culture: "Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚",
        fun: "Î”Î¹Î±ÏƒÎºÎ­Î´Î±ÏƒÎ· / Î’ÏŒÎ»Ï„ÎµÏ‚",
        other: "Î†Î»Î»ÎµÏ‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        all: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
      };

      document.getElementById("page-title").textContent =
        pageTitleMap[category] || "Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚";

      async function loadJson(path) {
        const res = await fetch(path);
        if (!res.ok) {
          throw new Error("Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ " + path);
        }
        return res.json();
      }

      // ===== Render Î³Î¹Î± Î±Ï€Î»Î­Ï‚ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ (Î»Î¯ÏƒÏ„Î± Î±Ï€ÏŒ news.json) =====
      function renderNewsArticles(articles) {
        const container = document.getElementById("content");
        container.innerHTML = "";

        if (!articles || !articles.length) {
          container.innerHTML = "<p>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î±Ï…Ï„Î® Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.</p>";
          return;
        }

        for (const article of articles) {
          const card = document.createElement("article");
          card.className = "article-card";

          const titleEl = document.createElement("h2");
          titleEl.textContent = article.simpleTitle || article.title || "Î§Ï‰ÏÎ¯Ï‚ Ï„Î¯Ï„Î»Î¿";

          const metaEl = document.createElement("div");
          metaEl.className = "meta";
          const metaParts = [];
          if (article.sourceName) metaParts.push(article.sourceName);
          if (article.publishedAt) {
            const d = new Date(article.publishedAt);
            metaParts.push(d.toLocaleString("el-GR"));
          }
          metaEl.textContent = metaParts.join(" â€¢ ");

          const contentEl = document.createElement("div");
          contentEl.className = "content";
          contentEl.textContent = article.simpleText || "";

          if (article.sourceUrl) {
            const linkEl = document.createElement("a");
            linkEl.href = article.sourceUrl;
            linkEl.target = "_blank";
            linkEl.rel = "noopener noreferrer";
            linkEl.textContent = "Î”ÎµÏ‚ Ï„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ® Ï€Î·Î³Î®";
            linkEl.style.display = "block";
            linkEl.style.marginTop = "0.5rem";
            contentEl.appendChild(document.createElement("br"));
            contentEl.appendChild(linkEl);
          }

          card.appendChild(titleEl);
          card.appendChild(metaEl);
          card.appendChild(contentEl);

          container.appendChild(card);
        }
      }

      // ===== Grid Î¼Îµ 3 ÎºÎ¬ÏÏ„ÎµÏ‚ Î³Î¹Î± Î£Î¿Î²Î±ÏÎ­Ï‚ (serious-digest) =====
      async function renderSeriousCategories() {
        const container = document.getElementById("content");
        container.innerHTML = "";

        try {
          const data = await loadJson("./serious-digest.json");
          const digestArticles = Array.isArray(data.articles) ? data.articles : [];

          if (!digestArticles.length) {
            container.innerHTML =
              "<p>Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Î¬ÏÎ¸ÏÎ± ÏƒÎ¿Î²Î±ÏÎ®Ï‚ ÎµÏ€Î¹ÎºÎ±Î¹ÏÏŒÏ„Î·Ï„Î±Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®.</p>";
            return;
          }

          const byTopic = {};
          for (const a of digestArticles) {
            if (a.topic) {
              byTopic[a.topic] = a;
            }
          }

          const topicsInOrder = ["politics_economy", "social", "world"];

          const grid = document.createElement("div");
          grid.className = "category-grid";

          for (const topic of topicsInOrder) {
            const digest = byTopic[topic];
            if (!digest) continue;

            const meta = SERIOUS_TOPIC_META[topic] || {
              label: digest.topicLabel || "Î£Î¿Î²Î±ÏÎ® ÎµÎ¯Î´Î·ÏƒÎ·",
              description: "",
              image: "",
            };

            const tile = document.createElement("article");
            tile.className = "category-tile";

            const link = document.createElement("a");
            link.className = "category-tile-link";
            link.href = "article.html?source=serious&topic=" + encodeURIComponent(topic);

            // thumbnail
            const thumbWrapper = document.createElement("div");
            thumbWrapper.className = "category-thumbnail-wrapper";

            if (meta.image) {
              const img = document.createElement("img");
              img.src = meta.image;
              img.alt = meta.label;
              img.className = "category-thumbnail";
              thumbWrapper.appendChild(img);
            }

            // body
            const bodyDiv = document.createElement("div");
            bodyDiv.className = "category-tile-body";

            const titleEl = document.createElement("div");
            titleEl.className = "category-tile-title";
            titleEl.textContent = meta.label;

            const subtitleEl = document.createElement("div");
            subtitleEl.className = "category-tile-subtitle";
            subtitleEl.textContent = meta.description || "";

            bodyDiv.appendChild(titleEl);
            bodyDiv.appendChild(subtitleEl);

            link.appendChild(thumbWrapper);
            link.appendChild(bodyDiv);
            tile.appendChild(link);
            grid.appendChild(tile);
          }

          if (!grid.hasChildNodes()) {
            container.innerHTML =
              "<p>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î¬ÏÎ¸ÏÎ± ÏƒÎ¿Î²Î±ÏÎ®Ï‚ ÎµÏ€Î¹ÎºÎ±Î¹ÏÏŒÏ„Î·Ï„Î±Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®.</p>";
          } else {
            container.appendChild(grid);
          }
        } catch (err) {
          console.error("Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ serious-digest.json:", err);
          container.innerHTML =
            "<p>Î ÏÎ¿Î­ÎºÏ…ÏˆÎµ Ï€ÏÏŒÎ²Î»Î·Î¼Î± ÏƒÏ„Î·Î½ Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ ÏƒÎ¿Î²Î±ÏÏÎ½ ÎµÎ¹Î´Î®ÏƒÎµÏ‰Î½.</p>";
        }
      }

      // ===== main init =====
      async function init() {
        try {
          if (category === "all") {
            const newsData = await loadJson("./news.json");
            const all = Array.isArray(newsData.articles) ? newsData.articles : [];
            renderNewsArticles(all);
          } else if (category === "serious") {
            // ÏƒÎ¿Î²Î±ÏÎ­Ï‚: grid Î¼Îµ 3 ÎºÎ¬ÏÏ„ÎµÏ‚ Î±Ï€ÏŒ serious-digest
            await renderSeriousCategories();
          } else {
            // Î±Ï€Î»Î­Ï‚ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚ Î±Ï€ÏŒ news.json.articlesByCategory
            const newsData = await loadJson("./news.json");
            const byCategory = newsData.articlesByCategory || {};
            const articles = byCategory[category] || [];
            renderNewsArticles(articles);
          }
        } catch (err) {
          console.error(err);
          document.getElementById("content").innerHTML =
            "<p>Î¥Ï€Î®ÏÎ¾Îµ ÏƒÏ†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½.</p>";
        }
      }

      init();
    </script>
  </body>
</html>




