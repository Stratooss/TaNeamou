<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <title>Î•ÏÎºÎ¿Î»ÎµÏ‚ Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚ â€“ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: #ffffff;
      font-size: 18px;
      line-height: 1.6;
    }

    .site-header {
      background: #1d4ed8;
      color: white;
      padding: 1.2rem 0;
      margin-bottom: 1.2rem;
    }

    .site-title {
      font-size: 1.6rem;
      font-weight: 700;
    }

    .site-subtitle {
      font-size: 0.95rem;
      margin-top: 0.3rem;
      opacity: 0.95;
    }

    .article-card-grid {
      border-radius: 16px;
      padding: 0.9rem 1rem;
      background-color: #ffffff;
      box-shadow: 0 3px 8px rgba(15, 23, 42, 0.08);
      border: 1px solid #e5e7eb;
      transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease;
      cursor: pointer;
    }

    .article-card-grid:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.18);
      background-color: #f9fafb;
    }

    .article-card-title {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
      color: #111827;
    }

    .article-card-snippet {
      font-size: 0.95rem;
      color: #374151;
      margin-bottom: 0.35rem;
    }

    .article-card-meta {
      font-size: 0.85rem;
      color: #6b7280;
    }

    #status {
      text-align: center;
      color: #4b5563;
      margin: 1rem 0;
    }

    .back-link {
      font-size: 0.95rem;
      margin-bottom: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- Î•Ï€Î¬Î½Ï‰ Î¼Ï€Î¬ÏÎ± -->
  <header class="site-header">
    <div class="container">
      <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2">
        <div>
          <div class="site-title">ğŸ“° Î•ÏÎºÎ¿Î»ÎµÏ‚ Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚</div>
          <div class="site-subtitle">ÎŸÎ¹ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚ ÏƒÎµ Î±Ï€Î»Î¬ ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬</div>
        </div>
        <div class="text-md-end">
          <span class="badge bg-light text-dark">Î“Î¹Î± Î¬Ï„Î¿Î¼Î± Î¼Îµ Î½Î¿Î·Ï„Î¹ÎºÎ® Ï…ÏƒÏ„Î­ÏÎ·ÏƒÎ·</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container mb-5">
    <a href="index.html" class="back-link">
      â† Î Î¯ÏƒÏ‰ ÏƒÏ„Î¿ Î¼ÎµÎ½Î¿Ï
    </a>

    <h1 id="category-title" class="h4 mb-2">Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚</h1>
    <p id="category-description" class="mb-3 text-muted"></p>

    <p id="status">Î¦Î¿ÏÏ„ÏÎ½Ï‰ Ï„Î¹Ï‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚â€¦</p>

    <div id="news" class="row g-3"></div>
  </main>

  <script>
    const CATEGORY_LABELS = {
      serious: {
        title: "Î£Î¿Î²Î±ÏÎ­Ï‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        description: "Î‘Ï„Ï…Ï‡Î®Î¼Î±Ï„Î±, Ï…Î³ÎµÎ¯Î±, Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎºÎ±Î¹ Î¬Î»Î»Î± ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÎ¬ Î³ÎµÎ³Î¿Î½ÏŒÏ„Î±."
      },
      sports: {
        title: "Î‘Î¸Î»Î·Ï„Î¹ÏƒÎ¼ÏŒÏ‚",
        description: "Î Î¿Î´ÏŒÏƒÏ†Î±Î¹ÏÎ¿, Î¼Ï€Î¬ÏƒÎºÎµÏ„ ÎºÎ±Î¹ Î¬Î»Î»Î± Î±Î¸Î»Î®Î¼Î±Ï„Î±."
      },
      movies: {
        title: "Î¤Î±Î¹Î½Î¯ÎµÏ‚",
        description: "ÎÎ­ÎµÏ‚ Ï„Î±Î¹Î½Î¯ÎµÏ‚ ÎºÎ±Î¹ Î½Î­Î± Î±Ï€ÏŒ Ï„Î¿Î½ ÎºÎ¹Î½Î·Î¼Î±Ï„Î¿Î³ÏÎ¬Ï†Î¿."
      },
      series: {
        title: "Î£ÎµÎ¹ÏÎ­Ï‚",
        description: "Î£ÎµÎ¹ÏÎ­Ï‚ ÏƒÏ„Î·Î½ Ï„Î·Î»ÎµÏŒÏÎ±ÏƒÎ· ÎºÎ±Î¹ ÏƒÏ„Î¹Ï‚ Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼ÎµÏ‚."
      },
      music: {
        title: "ÎœÎ¿Ï…ÏƒÎ¹ÎºÎ®",
        description: "Î¤ÏÎ±Î³Î¿ÏÎ´Î¹Î±, ÏƒÏ…Î½Î±Ï…Î»Î¯ÎµÏ‚ ÎºÎ±Î¹ ÎºÎ±Î»Î»Î¹Ï„Î­Ï‡Î½ÎµÏ‚."
      },
      theatre: {
        title: "Î˜Î­Î±Ï„ÏÎ¿",
        description: "Î˜ÎµÎ±Ï„ÏÎ¹ÎºÎ­Ï‚ Ï€Î±ÏÎ±ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ Ï€Î¿Î»Î¹Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬."
      },
      fun: {
        title: "Î”Î¹Î±ÏƒÎºÎ­Î´Î±ÏƒÎ·",
        description: "Î•ÎºÎ´Î·Î»ÏÏƒÎµÎ¹Ï‚, Ï†ÎµÏƒÏ„Î¹Î²Î¬Î» ÎºÎ±Î¹ Î²ÏŒÎ»Ï„ÎµÏ‚."
      },
      other: {
        title: "Î†Î»Î»ÎµÏ‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        description: "Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Î´ÎµÎ½ Ï„Î±Î¹ÏÎ¹Î¬Î¶Î¿Ï…Î½ ÏƒÏ„Î¹Ï‚ Î¬Î»Î»ÎµÏ‚ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯ÎµÏ‚."
      },
      all: {
        title: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        description: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚ Î¼Î±Î¶Î¯ ÏƒÎµ Î¼Î¯Î± Î»Î¯ÏƒÏ„Î±."
      }
    };

    let globalArticles = [];
    let activeCategory = "all";

    function getQueryCategory() {
      const params = new URLSearchParams(window.location.search);
      const cat = (params.get("category") || "all").toLowerCase();
      return CATEGORY_LABELS[cat] ? cat : "all";
    }

    function cleanMarkdown(text) {
      if (!text) return "";
      return text
        .replace(/\*\*(.+?)\*\*/g, "$1")
        .replace(/###\s*/g, "")
        .trim();
    }

    function shortText(text, maxLen = 220) {
      if (!text) return "";
      if (text.length <= maxLen) return text;
      return text.slice(0, maxLen).trim() + "â€¦";
    }

    function renderArticles() {
      const container = document.getElementById("news");
      const statusEl = document.getElementById("status");
      container.innerHTML = "";

      let filtered = globalArticles.filter(a => !a.isSensitive);

      if (activeCategory !== "all") {
        filtered = filtered.filter(a => {
          const cat = (a.category || "other").toLowerCase();
          return cat === activeCategory;
        });
      }

      if (!filtered.length) {
        statusEl.textContent = "Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚ ÏƒÎµ Î±Ï…Ï„Î® Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.";
        return;
      } else {
        statusEl.textContent = "";
      }

      filtered.forEach((a) => {
        const col = document.createElement("div");
        col.className = "col-12 col-md-6";

        const card = document.createElement("article");
        card.className = "article-card-grid h-100";
        card.tabIndex = 0;
        card.setAttribute("role", "button");

        const titleEl = document.createElement("h2");
        titleEl.className = "article-card-title";
        const displayTitle = a.simpleTitle || a.title || "";
        titleEl.textContent = displayTitle;
        card.appendChild(titleEl);

        const snippetEl = document.createElement("p");
        snippetEl.className = "article-card-snippet";
        const rawText = cleanMarkdown(a.simpleText || a.text || "");
        snippetEl.textContent = shortText(rawText);
        card.appendChild(snippetEl);

        const metaEl = document.createElement("div");
        metaEl.className = "article-card-meta";
        const parts = [];

        if (a.sourceName) {
          parts.push("Î Î·Î³Î®: " + a.sourceName);
        }
        if (a.publishedAt) {
          parts.push("Î—Î¼/Î½Î¯Î±: " + a.publishedAt);
        }

        metaEl.textContent = parts.join(" Â· ");
        card.appendChild(metaEl);

        col.appendChild(card);
        container.appendChild(col);

        // id Î¬ÏÎ¸ÏÎ¿Ï…: ÎµÎ¯Ï„Îµ Î±Ï€ÏŒ backend ÎµÎ¯Ï„Îµ Î¸Î­ÏƒÎ· ÏƒÏ„Î¿Î½ global Ï€Î¯Î½Î±ÎºÎ±
        const articleIndex = globalArticles.indexOf(a);
        const articleId = a.id != null ? a.id : articleIndex;

        const goToArticle = () => {
          if (articleId == null || articleId < 0) return;
          window.location.href =
            "article.html?id=" + encodeURIComponent(articleId);
        };

        card.addEventListener("click", goToArticle);
        card.addEventListener("keypress", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            goToArticle();
          }
        });
      });
    }

    async function loadNews() {
      const statusEl = document.getElementById("status");
      try {
        const res = await fetch("news.json?cachebust=" + Date.now());
        if (!res.ok) {
          throw new Error("HTTP " + res.status);
        }

        const data = await res.json();
        globalArticles = (data && data.articles) || [];

        if (!globalArticles.length) {
          statusEl.textContent = "Î ÏÎ¿Ï‚ Ï„Î¿ Ï€Î±ÏÏŒÎ½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚.";
          return;
        }

        renderArticles();
      } catch (err) {
        console.error(err);
        statusEl.textContent =
          "Î ÏÎ¿Î­ÎºÏ…ÏˆÎµ Ï€ÏÏŒÎ²Î»Î·Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ ÎµÎ¹Î´Î®ÏƒÎµÏ‰Î½: " + err.message;
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      activeCategory = getQueryCategory();

      const info = CATEGORY_LABELS[activeCategory];
      document.getElementById("category-title").textContent = info.title;
      document.getElementById("category-description").textContent =
        info.description;

      loadNews();
    });
  </script>
</body>
</html>
