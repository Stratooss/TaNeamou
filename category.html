<!doctype html>
<html lang="el">
  <head>
    <meta charset="utf-8" />
    <title>Î•ÏÎºÎ¿Î»Î± ÎÎ­Î± â€“ ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      :root {
        --bg: #020617;
        --card-bg: #111827; /* ÏƒÎºÎ¿ÏÏÎ¿ Î³ÎºÏÎ¹ */
        --card-border: rgba(148, 163, 184, 0.3);
        --accent: #60a5fa;
        --text-main: #e5e7eb;
        --text-muted: #9ca3af;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background-color: var(--bg);
        color: var(--text-main);
        font-size: 18px;
        line-height: 1.7;
        margin: 0;
      }

      a {
        color: var(--accent);
        text-decoration: none;
      }

      a:hover {
        color: #93c5fd;
      }

      .site-header {
        background: #0b1224;
        color: var(--text-main);
        padding: 1.6rem 0;
        margin-bottom: 1.6rem;
        border-bottom: 1px solid var(--card-border);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.28);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .site-title {
        font-size: 2rem;
        font-weight: 800;
        letter-spacing: 0.3px;
      }
      .site-subtitle {
        font-size: 1rem;
        color: var(--text-muted);
        margin-top: 0.25rem;
      }
      .back-link {
        font-size: 1rem;
        margin-bottom: 1.1rem;
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        color: var(--accent);
      }

      /* ===== ÎšÎ»Î±ÏƒÎ¹ÎºÎ­Ï‚ ÎºÎ¬ÏÏ„ÎµÏ‚ Î¬ÏÎ¸ÏÏ‰Î½ (Î»Î¯ÏƒÏ„Î± Î±Ï€ÏŒ news.json) ===== */
            .article-card {
        border-radius: 1rem;
        border: 1px solid var(--card-border);
        padding: 1rem 1.1rem;
        margin-bottom: 1rem;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.28);
        background: var(--card-bg);
        transition: border-color 0.14s ease, transform 0.14s ease;
        position: relative;
        cursor: pointer;
            }

      .article-card:hover {
        border-color: rgba(96, 165, 250, 0.7);
        transform: translateY(-2px);
      }

      .article-card h2 {
        margin-top: 0;
        font-size: 1.15rem;
        color: var(--text-main);
        font-weight: 800;
      }

      .meta {
        font-size: 0.95rem;
        color: var(--text-muted);
        margin-bottom: 0.45rem;
      }

      .content {
        white-space: pre-wrap;
        font-size: 1.02rem;
      }

      /* ===== Grid Î³Î¹Î± ÏƒÎ¿Î²Î±ÏÎ­Ï‚ Î¸ÎµÎ¼Î±Ï„Î¹ÎºÎ­Ï‚ (Î¼Îµ ÎµÎ¹ÎºÏŒÎ½ÎµÏ‚ full) ===== */
      .category-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(260px, 1fr));
        gap: 1.5rem;
        max-width: 1100px;
        margin: 0 auto 2rem;
        justify-items: center;
      }

      .category-tile {
        border-radius: 1rem;
        background: var(--card-bg); /* ÏƒÎºÎ¿ÏÏÎ¿ Î³ÎºÏÎ¹ Î±Î½Ï„Î¯ Î³Î¹Î± â€œÎ¼Î±ÏÏÎ¿â€ */
        border: 1px solid var(--card-border);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.28);
        overflow: hidden;
        transition: transform 0.14s ease, border-color 0.14s ease, background-color 0.14s ease;
        width: 100%;
        max-width: 340px;
      }

      .category-tile:hover {
        transform: translateY(-2px);
        border-color: rgba(96, 165, 250, 0.7);
        background-color: #0f172a;
      }

      .category-tile-link {
        display: flex;
        flex-direction: column;
        height: 100%;
        text-decoration: none;
        color: inherit;
        padding: 0;
      }

      .category-tile-link:focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 3px;
        border-radius: 1rem;
      }

      .category-thumbnail-wrapper {
        width: 100%;
        border-radius: 0.9rem 0.9rem 0 0;
        overflow: hidden;
        border-bottom: 1px solid var(--card-border);
        background: var(--card-bg); /* Î³ÎºÏÎ¹ Ï†ÏŒÎ½Ï„Î¿ Î³Î¹Î± Ï„Î± Î´Î¹Î¬Ï†Î±Î½Î± PNG */
      }

      .category-thumbnail {
        width: 100%;
        height: auto;
        display: block;
      }

      .category-tile-body {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
        padding: 1rem 1.1rem 1.2rem;
      }

      .category-tile-title {
        font-weight: 800;
        font-size: 1.05rem;
        color: var(--text-main);
      }

      .category-tile-subtitle {
        font-size: 0.98rem;
        color: var(--text-muted);
      }

      /* Responsive: ÏƒÎµ tablet 2 ÎºÎ¬ÏÏ„ÎµÏ‚, ÏƒÎµ ÎºÎ¹Î½Î·Ï„ÏŒ 1 */
      @media (max-width: 992px) {
        .category-grid {
          grid-template-columns: repeat(2, minmax(240px, 1fr));
        }
      }

      @media (max-width: 576px) {
        .category-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="container">
        <div class="d-flex flex-column align-items-start gap-1">
          <div class="d-flex align-items-center gap-2 flex-wrap">
            <div id="site-title" class="site-title">ğŸ“° Î•ÏÎºÎ¿Î»Î± ÎÎ­Î±</div>
          </div>
          <div class="site-subtitle">Î‘Ï€Î»Î® ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î³Î¹Î± ÏŒÎ»Î¿Ï…Ï‚</div>
        </div>
      </div>
    </header>

    <main class="container mb-5">
      <a href="index.html" class="back-link">â† Î Î¯ÏƒÏ‰ ÏƒÏ„Î¿ Î¼ÎµÎ½Î¿Ï ÎºÎ±Ï„Î·Î³Î¿ÏÎ¹ÏÎ½</a>
      <h1 id="page-title" class="h4 mb-3">Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚</h1>

      <div id="content"></div>
    </main>

    <script>
      const params = new URLSearchParams(window.location.search);
      const category = params.get("category") || "serious";

      const SERIOUS_TOPIC_META = {
        politics_economy: {
          label: "Î Î¿Î»Î¹Ï„Î¹ÎºÎ® & ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¯Î±",
          description: "Î¤Î¹ Î³Î¯Î½ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ ÎºÏ…Î²Î­ÏÎ½Î·ÏƒÎ·, ÏƒÏ„Î· Î²Î¿Ï…Î»Î® ÎºÎ±Î¹ ÏƒÏ„Î·Î½ Î¿Î¹ÎºÎ¿Î½Î¿Î¼Î¯Î±.",
          image: "images/serious/politics.png",
        },
        social: {
          label: "ÎšÎ¿Î¹Î½Ï‰Î½Î¯Î±",
          description: "Î˜Î­Î¼Î±Ï„Î± Ï€Î¿Ï… Î±Ï†Î¿ÏÎ¿ÏÎ½ Ï„Î·Î½ ÎºÎ±Î¸Î·Î¼ÎµÏÎ¹Î½Î® Î¶Ï‰Î® ÎºÎ±Î¹ Ï„Î¿Ï…Ï‚ Î±Î½Î¸ÏÏÏ€Î¿Ï…Ï‚.",
          image: "images/serious/social.png",
        },
        world: {
          label: "ÎšÏŒÏƒÎ¼Î¿Ï‚",
          description: "Î£Î·Î¼Î±Î½Ï„Î¹ÎºÎ¬ Î³ÎµÎ³Î¿Î½ÏŒÏ„Î± Î±Ï€ÏŒ Î¬Î»Î»ÎµÏ‚ Ï‡ÏÏÎµÏ‚.",
          image: "images/serious/world.png",
        },
      };

      const pageTitleMap = {
        serious: "Î£Î¿Î²Î±ÏÎ­Ï‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        happy: "Î§Î±ÏÎ¿ÏÎ¼ÎµÎ½ÎµÏ‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        sports: "Î‘Î¸Î»Î·Ï„Î¹ÎºÎ¬",
        screen: "Î¤Î·Î»ÎµÏŒÏÎ±ÏƒÎ· ÎºÎ±Î¹ ÏƒÎ¹Î½ÎµÎ¼Î¬",
        culture: "Î Î¿Î»Î¹Ï„Î¹ÏƒÎ¼ÏŒÏ‚",
        fun: "Î”Î¹Î±ÏƒÎºÎ­Î´Î±ÏƒÎ· / Î’ÏŒÎ»Ï„ÎµÏ‚",
        other: "Î†Î»Î»ÎµÏ‚ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
        all: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚",
      };

      document.getElementById("page-title").textContent =
        pageTitleMap[category] || "Î•Î¹Î´Î®ÏƒÎµÎ¹Ï‚";

      async function loadJson(path) {
        const res = await fetch(path);
        if (!res.ok) {
          throw new Error("Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ " + path);
        }
        return res.json();
      }

      function renderNewsArticles(articles) {
        const container = document.getElementById("content");
        container.innerHTML = "";

        if (!articles || !articles.length) {
          container.innerHTML = "<p>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎµÎ¹Î´Î®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î±Ï…Ï„Î® Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.</p>";
          return;
        }

        for (const article of articles) {
          const card = document.createElement("article");
          card.className = "article-card";

          const href = article.id
            ? "article.html?id=" + encodeURIComponent(article.id) +
              "&category=" + encodeURIComponent(category)
            : null;

          const titleEl = document.createElement("h2");
          if (href) {
            const titleLink = document.createElement("a");
            titleLink.href = href;
            titleLink.className = "text-decoration-none text-reset";
            titleLink.textContent = article.simpleTitle || article.title || "Î§Ï‰ÏÎ¯Ï‚ Ï„Î¯Ï„Î»Î¿";
            titleEl.appendChild(titleLink);
          } else {
            titleEl.textContent = article.simpleTitle || article.title || "Î§Ï‰ÏÎ¯Ï‚ Ï„Î¯Ï„Î»Î¿";
          }

          const metaEl = document.createElement("div");
          metaEl.className = "meta";
          const metaParts = [];
          if (article.sourceName) metaParts.push(article.sourceName);
          if (article.publishedAt) {
            const d = new Date(article.publishedAt);
            metaParts.push(d.toLocaleString("el-GR"));
          }
          metaEl.textContent = metaParts.join(" â€¢ ");

          const contentEl = document.createElement("div");
          contentEl.className = "content";
          contentEl.textContent = article.simpleText || "";

          if (article.sourceUrl) {
            const linkEl = document.createElement("a");
            linkEl.href = article.sourceUrl;
            linkEl.target = "_blank";
            linkEl.rel = "noopener noreferrer";
            linkEl.dataset.externalSource = "true";
            linkEl.textContent = "Î”ÎµÏ‚ Ï„Î·Î½ Î±ÏÏ‡Î¹ÎºÎ® Ï€Î·Î³Î®";
            linkEl.style.display = "block";
            linkEl.style.marginTop = "0.5rem";
            contentEl.appendChild(document.createElement("br"));
            contentEl.appendChild(linkEl);
          }

          if (href) {
            card.addEventListener("click", (event) => {
              if (event.target.closest("a")) return;
              window.location.href = href;
            });
          }

          card.appendChild(titleEl);
          card.appendChild(metaEl);
          card.appendChild(contentEl);

          container.appendChild(card);
        }
      }

      async function renderSeriousCategories() {
        const container = document.getElementById("content");
        container.innerHTML = "";

        try {
          const data = await loadJson("./serious-digest.json");
          const digestArticles = Array.isArray(data.articles) ? data.articles : [];

          if (!digestArticles.length) {
            container.innerHTML =
              "<p>Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Î¬ÏÎ¸ÏÎ± ÏƒÎ¿Î²Î±ÏÎ®Ï‚ ÎµÏ€Î¹ÎºÎ±Î¹ÏÏŒÏ„Î·Ï„Î±Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®.</p>";
            return;
          }

          const byTopic = {};
          for (const a of digestArticles) {
            if (a.topic) {
              byTopic[a.topic] = a;
            }
          }

          const topicsInOrder = ["politics_economy", "social", "world"];

          const grid = document.createElement("div");
          grid.className = "category-grid";

          for (const topic of topicsInOrder) {
            const digest = byTopic[topic];
            if (!digest) continue;

            const meta = SERIOUS_TOPIC_META[topic] || {
              label: digest.topicLabel || "Î£Î¿Î²Î±ÏÎ® ÎµÎ¯Î´Î·ÏƒÎ·",
              description: "",
              image: "",
            };

            const tile = document.createElement("article");
            tile.className = "category-tile";

            const link = document.createElement("a");
            link.className = "category-tile-link";
            link.href = "article.html?source=serious&topic=" + encodeURIComponent(topic);

            const thumbWrapper = document.createElement("div");
            thumbWrapper.className = "category-thumbnail-wrapper";

            if (meta.image) {
              const img = document.createElement("img");
              img.src = meta.image;
              img.alt = meta.label;
              img.className = "category-thumbnail";
              thumbWrapper.appendChild(img);
            }

            const bodyDiv = document.createElement("div");
            bodyDiv.className = "category-tile-body";

            const titleEl = document.createElement("div");
            titleEl.className = "category-tile-title";
            titleEl.textContent = meta.label;

            const subtitleEl = document.createElement("div");
            subtitleEl.className = "category-tile-subtitle";
            subtitleEl.textContent = meta.description || "";

            bodyDiv.appendChild(titleEl);
            bodyDiv.appendChild(subtitleEl);

            link.appendChild(thumbWrapper);
            link.appendChild(bodyDiv);
            tile.appendChild(link);
            grid.appendChild(tile);
          }

          if (!grid.hasChildNodes()) {
            container.innerHTML =
              "<p>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î¬ÏÎ¸ÏÎ± ÏƒÎ¿Î²Î±ÏÎ®Ï‚ ÎµÏ€Î¹ÎºÎ±Î¹ÏÏŒÏ„Î·Ï„Î±Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®.</p>";
          } else {
            container.appendChild(grid);
          }
        } catch (err) {
          console.error("Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ serious-digest.json:", err);
          container.innerHTML =
            "<p>Î ÏÎ¿Î­ÎºÏ…ÏˆÎµ Ï€ÏÏŒÎ²Î»Î·Î¼Î± ÏƒÏ„Î·Î½ Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ ÏƒÎ¿Î²Î±ÏÏÎ½ ÎµÎ¹Î´Î®ÏƒÎµÏ‰Î½.</p>";
        }
      }

      // ===== main init =====
      function setupSiteTitleReload() {
        const titleEl = document.querySelector(".site-title");
        if (!titleEl) return;

        titleEl.addEventListener("click", (event) => {
          event.preventDefault();
          window.location.reload();
        });
      }
      async function init() {
        try {
          if (category === "all") {
            const newsData = await loadJson("./news.json");
            const all = Array.isArray(newsData.articles) ? newsData.articles : [];
            renderNewsArticles(all);
          } else if (category === "serious") {
            await renderSeriousCategories();
          } else {
            const newsData = await loadJson("./news.json");
            const byCategory = newsData.articlesByCategory || {};
            const articles = byCategory[category] || [];
            renderNewsArticles(articles);
          }
        } catch (err) {
          console.error(err);
          document.getElementById("content").innerHTML =
            "<p>Î¥Ï€Î®ÏÎ¾Îµ ÏƒÏ†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½.</p>";
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        setupSiteTitleReload();
        init();
      });
    </script>
  </body>
</html>


